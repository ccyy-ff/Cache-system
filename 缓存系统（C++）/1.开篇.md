# 1.开篇

## 开篇：帮助初次学习缓存项目的人能够更快的上手项目的开发

#### 项目名称：KamaCache

#### 项目地址：[GitHub - youngyangyang04/KamaCache: 【代码随想录知识星球】项目分享-cache的实现（LRU，LFU，ARC）](https://github.com/youngyangyang04/KamaCache)

**此项目使用多个页面替换策略实现了一个线程安全的缓存系统：**

* LRU：最近最久未使用页面置换算法
* LFU：最不经常使用页面置换算法
* ARC：自适应替换缓存算法

## 如何运行项目

## <font style="color:rgb(31, 35, 40);">系统环境</font>

```plain
Ubuntu 22.04 LTS
```

## <font style="color:rgb(31, 35, 40);">编译</font>

<font style="color:rgb(31, 35, 40);">在项目目录下创建一个build文件夹并进入</font>

```plain
mkdir build && cd build
```

<font style="color:rgb(31, 35, 40);">生成构建文件</font>

```plain
cmake ..
```

<font style="color:rgb(31, 35, 40);">构建项目</font>

```plain
make
```

<font style="color:rgb(31, 35, 40);">如果要清理生成的可执行文件</font>

```plain
make clean
```

## <font style="color:rgb(31, 35, 40);">运行</font>

```plain
./main
```

## <font style="color:rgb(31, 35, 40);">测试结果</font>

<font style="color:rgb(31, 35, 40);">不同缓存策略缓存命中率测试对比结果如下： （ps: 该测试代码只是尽可能地模拟真实的访问场景，但是跟真实的场景仍存在一定差距，测试结果仅供参考。）</font>

![hitTest.jpg](./img/an9lm3Wl_884ZTVn/hitTest-151692.jpeg)

## 做完本项目，你的收获

* 掌握缓存的作用、层次结构与设计哲学，理解其在系统架构中的关键价值
* 亲手实现并优化LRU、LFU、ARC算法，应对不同业务场景
* 运用互斥锁、原子操作及缓存分片技术，保证多线程数据一致性与高性能
* 通过分片降低锁竞争、预加载预热缓存，显著提升吞吐量与响应速度
* 实践应对缓存穿透、击穿、雪崩的行业通用解决方案
* 从数据结构设计、策略选择到性能评估，获得构建高性能中间件的完整经验

## 引言

缓存策略在系统和实际业务开发过程中较为常见，下面我为大家列出一些使用了缓存策略的知名系统和组件：

### 操作系统与存储系统

#### Linux Kernel：

* \*\*LRU: \*\*
  * 用于内存管理中页面缓存(Page Cache)，当物理内存不足时，系统会优先淘汰最近未使用的页面。
  * 内核的虚拟文件系统(VFS)也采用LRU维护缓存的元数据

#### Redis：

* **LRU和LFU：**
  * <font style="color:rgb(6, 6, 7);">Redis 本身并不直接实现 LRU 缓存策略，但它提供了过期和淘汰机制。在内存不足时，Redis 可以配置不同的淘汰策略，如 </font><code><font style="color:rgb(6, 6, 7);">volatile-lru</font></code><font style="color:rgb(6, 6, 7);">（对于设置了过期时间的键，使用 LRU 策略淘汰数据）。</font>
  * Redis 提供了 LFU 策略（从 4.0 版本开始）作为其内存驱逐策略之一，可以通过 `maxmemory-policy` 配置。

#### ZFS（Zettabyte File System）

* **ARC:**
  * ZFS文件系统中的缓存管理主要基于ARC
  * ARC优于单纯的LRU或LFU，因为它能动态调整缓存策略以适应不同的访问模式

#### PostgreSQL

* **ARC:**
  * 场景：在一些PostgreSQL的缓存拓展中实现了基于ARC的缓存机制

#### Hadoop

* Hadoop(改进实现)
  * 场景：某些分布式存储的改进版本中，使用了类似ARC的动态缓存替换策略

***

### 网络与负载均衡

#### NGINX

* **LRU:**
  * 用于缓存代理模式下的响应数据，淘汰最久未使用的缓存条目

### 嵌入式系统与浏览器

#### Android内存缓存

* **LRU:**
  * Android的LruCache类用于管理有限内存中的应用数据缓存。

#### Web浏览器

* **LRU:**
  * 浏览器的缓存机制（如历史记录、图片缓存）使用LRU策略来淘汰过期数据。


> 更新: 2025-11-12 17:17:30  
> 原文: <https://www.yuque.com/chengxuyuancarl/ctp2tl/nl447lmng4x0sv6q>